!function($){var InputValid=function(a,b){this.init(a,b)},old=null;InputValid.prototype={init:function(a,b){this.message=$.extend({},this.message,b),this.$form=$(a),this.addEvent()},addEvent:function(){var a=this;this.$form.find("input").blur(function(){var b=$(this).attr("data-blur");Boolean(b)&&"true"!=b||a.validate(this)}),this.$form.find("input").focus(function(){$(this).popover("destroy"),$(this).parents(".has-error").removeClass("has-error")}),this.$form.find("select").blur(function(){var b=$(this).attr("data-blur");Boolean(b)&&"true"!=b||a.validate(this)}),this.$form.find("select").focus(function(){$(this).popover("destroy"),$(this).parents(".has-error").removeClass("has-error")}),this.$form.find("textarea").blur(function(){var b=$(this).attr("data-blur");Boolean(b)&&"true"!=b||a.validate(this)}),this.$form.find("textarea").focus(function(){$(this).popover("destroy"),$(this).parents(".has-error").removeClass("has-error")})},validate_all:function(){var a=this,b=!0;return this.$form.find("input").each(function(){a.validate(this)||(b=!1)}),this.$form.find("select").each(function(){a.validate(this)||(b=!1)}),this.$form.find("textarea").each(function(){a.validate(this)||(b=!1)}),b},validate:function(input){var self,$input=$(input),result=!0,data_valids=eval($input.attr("data-valid"));return Boolean(data_valids)&&($input.popover("destroy"),$input.parents(".form-group").removeClass("has-error"),self=this,$.each(data_valids,function(){if(Boolean(this.rule)&&"string"==typeof this.rule&&"function"==typeof self.methods[this.rule]){if("not_empty"!==this.rule&&!self.methods.not_empty($input.val()))return!0;if(!self.methods[this.rule]($input.val(),this.value))return self.popover_option.content=Boolean(this.message)?this.message.replace(/:value/g,this.value):self.message[this.rule].replace(/:value/g,this.value),$input.parents(".form-group").addClass("has-error"),$input.popover(self.popover_option),$input.popover("show"),result=!1,!1}})),result},methods:{not_empty:function(a){return null!==a&&$.trim(a).length>0},min_length:function(a,b){return $.trim(a).length>=parseInt(b,10)},max_length:function(a,b){return this.not_empty(a)?$.trim(a).length<=parseInt(b,10):!0},exact_length:function(a,b){return $.trim(a).length===parseInt(b,10)},min_value:function(a,b){var c=parseInt($.trim(a),10);return!isNaN(c)&&c>=parseInt(b,10)},max_value:function(a,b){var c=parseInt($.trim(a),10);return!isNaN(c)&&c<=parseInt(b,10)},equals:function(a,b){return a===b},regex:function(a,b){var c=new RegExp(b);return c.test(a)},email:function(a){var b=new RegExp("^([a-zA-Z0-9]+[_|_|.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|_|.]?)*[a-zA-Z0-9]+.[a-zA-Z]{2,3}$");return b.test($.trim(a))},url:function(a){var b=new RegExp("^(http|https|ftp|udp|mop)\\://\\S+$");return b.test(a)},ip:function(a){var b=new RegExp("^((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2}).){3}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})$");return b.test($.trim(a))},mac:function(a){var b=new RegExp("^([0-9a-fA-F]{2})(([/s:-][0-9a-fA-F]{2}){5})$");return b.test(a)},year:function(a){return!isNaN(parseInt(a,10))&&parseInt(a,10)<=3e3&&parseInt(a,10)>=1900?!0:!1},date:function(a){var b=new RegExp("^[0-9]{4}-(((0[13578]|(10|12))-(0[1-9]|[1-2][0-9]|3[0-1]))|(02-(0[1-9]|[1-2][0-9]))|((0[469]|11)-(0[1-9]|[1-2][0-9]|30)))$");return b.test(a)},id:function(a){var b=new RegExp("^[0-9a-zA-Z:_-]+$");return b.test(a)},chinese:function(a){var b=new RegExp("^[u4e00-u9fa5]+$");return b.test(a)},version:function(a){var b=new RegExp("^[0-9.]+$");return b.test(a)},domain:function(a){var b=new RegExp("^[a-zA-Z0-9][-a-zA-Z0-9]{0,62}(\\.[a-zA-Z0-9][-a-zA-Z0-9]{0,62})+.?$");return b.test(a)},path:function(a){var b=new RegExp("(^\\.|^/|^[a-zA-Z])?:?/.+(/$)?");return b.test(a)},integer:function(a){var b=new RegExp("^-?\\d+$");return b.test(a)},positive:function(a){var b=new RegExp("^[0-9]*[1-9][0-9]*$");return b.test(a)},non_negative:function(a){var b=new RegExp("^\\d+$");return b.test(a)}},message:{not_empty:"",min_length:"",max_length:"",exact_length:"",min_value:"",max_value:"",equals:"",regex:"",email:"",url:"",ip:"",mac:"",year:"",date:"",id:"",chinese:"",version:"",domain:"",path:"",integer:"",positive:"",non_negative:""},popover_option:{placement:"bottom",trigger:"manual",content:""}},old=$.fn.inputValid,$.fn.inputValid=function(a){var b=null;return $(this).each(function(c,d){var e=$(d),f=e.data("inputvalid"),g="object"!=typeof a?null:a;f||e.data("inputvalid",f=new InputValid(this,g)),b=f}),b}}(jQuery);